---
import favicon from "./_favicon.svg"
import { h } from "preact"
import { renderToString } from "preact-render-to-string"
import { GameUISSR } from "components/GameUI.tsx"
import "../tokens.css"
---
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Tic Tac Toe</title>
		<meta name="description" content="Enjoy the classic game of Tic Tac Toe in your browser! Play against friends or use random matchmaking and beat them all to pulp!."/>
		<link rel="icon" type="image/svg+xml" href={favicon.src} />
		<link rel="preload" as="font" type="font/woff2" crossorigin href="https://fonts.gstatic.com/s/sueellenfrancisco/v20/wXK3E20CsoJ9j1DDkjHcQ5ZL8xRaxru9no1P2w.woff2">
		<style>
			@font-face {
				font-family: "Sue Ellen Francisco";
				font-style: normal;
				font-weight: 400;
				font-display: block;
				src: url(https://fonts.gstatic.com/s/sueellenfrancisco/v20/wXK3E20CsoJ9j1DDkjHcQ5ZL8xRaxru9no1P2w.woff2) format('woff2');
				unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
			}
			body {
				font-family: "Sue Ellen Francisco";
				margin: 0;
				height: 100dvh;
				display: grid;
				place-items: center;
				font-size: 2rem;
				background: var(--primary-container);
				transition: background 250ms;
				color-scheme: light dark;
			}
			body > :global(*) {
				grid-area: 1 / 1;
			}
			@media (prefers-color-scheme: dark) {
				body[data-switch-color-scheme] {
					color-scheme: light;
				}
			}
			@media (prefers-color-scheme: light) {
				body[data-switch-color-scheme] {
					color-scheme: dark;
				}
			}
			@keyframes ellipsis {
				0%, 32% { content: "." }
				34%, 66% { content: ".." }
				68%, 100% { content: "..." }
			}
		</style>
		<script>
			import { h, hydrate } from "preact"
			import { GameUI } from "components/GameUI.tsx"
			import "components/component-store-reactivity.ts"
			
			if (import.meta.env.DEV) await import("preact/debug")

			hydrate(h(GameUI, {}), document.body)
		</script>
	</head>
	<body><Fragment set:html={renderToString(h(GameUISSR, {}))}/></body>
</html>
